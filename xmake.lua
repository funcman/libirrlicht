add_rules("mode.debug", "mode.release")
add_requires("dxsdk")

target("libirrlicht")
    set_kind("shared")
    add_defines("IRRLICHT_EXPORTS=1")
    add_includedirs(
        "include/irrlicht",
        "src/irrlicht/zlib",
        "src/irrlicht/jpeglib",
        "src/irrlicht/libpng"
    )
    -- Mesh
    add_files(
        "src/irrlicht/CBSPMeshFileLoader.cpp",
        "src/irrlicht/CMD2MeshFileLoader.cpp",
        "src/irrlicht/CMD3MeshFileLoader.cpp",
        "src/irrlicht/CMS3DMeshFileLoader.cpp",
        "src/irrlicht/CB3DMeshFileLoader.cpp",
        "src/irrlicht/C3DSMeshFileLoader.cpp",
        "src/irrlicht/COgreMeshFileLoader.cpp",
        "src/irrlicht/COBJMeshFileLoader.cpp",
        "src/irrlicht/CColladaFileLoader.cpp",
        "src/irrlicht/CPLYMeshFileLoader.cpp",
        "src/irrlicht/CCSMLoader.cpp",
        "src/irrlicht/CDMFLoader.cpp",
        "src/irrlicht/CLMTSMeshFileLoader.cpp",
        "src/irrlicht/CMY3DMeshFileLoader.cpp",
        "src/irrlicht/COCTLoader.cpp",
        "src/irrlicht/CXMeshFileLoader.cpp",
        "src/irrlicht/CIrrMeshFileLoader.cpp",
        "src/irrlicht/CSTLMeshFileLoader.cpp",
        "src/irrlicht/CLWOMeshFileLoader.cpp",
        "src/irrlicht/CSMFMeshFileLoader.cpp",
        "src/irrlicht/CColladaMeshWriter.cpp",
        "src/irrlicht/CIrrMeshWriter.cpp",
        "src/irrlicht/COBJMeshWriter.cpp",
        "src/irrlicht/CSTLMeshWriter.cpp",
        "src/irrlicht/CPLYMeshWriter.cpp",
        "src/irrlicht/CSkinnedMesh.cpp",
        "src/irrlicht/CBoneSceneNode.cpp",
        "src/irrlicht/CMeshSceneNode.cpp",
        "src/irrlicht/CAnimatedMeshSceneNode.cpp",
        "src/irrlicht/CAnimatedMeshMD2.cpp",
        "src/irrlicht/CAnimatedMeshMD3.cpp",
        "src/irrlicht/CQ3LevelMesh.cpp",
        "src/irrlicht/CQuake3ShaderSceneNode.cpp",
        "src/irrlicht/CAnimatedMeshHalfLife.cpp"
    )
    -- Scene
    add_files(
        "src/irrlicht/CBillboardSceneNode.cpp",
        "src/irrlicht/CCameraSceneNode.cpp",
        "src/irrlicht/CDummyTransformationSceneNode.cpp",
        "src/irrlicht/CEmptySceneNode.cpp",
        "src/irrlicht/CGeometryCreator.cpp",
        "src/irrlicht/CLightSceneNode.cpp",
        "src/irrlicht/CMeshManipulator.cpp",
        "src/irrlicht/CMetaTriangleSelector.cpp",
        "src/irrlicht/COctreeSceneNode.cpp",
        "src/irrlicht/COctreeTriangleSelector.cpp",
        "src/irrlicht/CSceneCollisionManager.cpp",
        "src/irrlicht/CSceneManager.cpp",
        "src/irrlicht/CShadowVolumeSceneNode.cpp",
        "src/irrlicht/CSkyBoxSceneNode.cpp",
        "src/irrlicht/CSkyDomeSceneNode.cpp",
        "src/irrlicht/CTerrainSceneNode.cpp",
        "src/irrlicht/CTerrainTriangleSelector.cpp",
        "src/irrlicht/CVolumeLightSceneNode.cpp",
        "src/irrlicht/CCubeSceneNode.cpp",
        "src/irrlicht/CSphereSceneNode.cpp",
        "src/irrlicht/CTextSceneNode.cpp",
        "src/irrlicht/CTriangleBBSelector.cpp",
        "src/irrlicht/CTriangleSelector.cpp",
        "src/irrlicht/CWaterSurfaceSceneNode.cpp",
        "src/irrlicht/CMeshCache.cpp",
        "src/irrlicht/CDefaultSceneNodeAnimatorFactory.cpp",
        "src/irrlicht/CDefaultSceneNodeFactory.cpp",
        "src/irrlicht/CSceneLoaderIrr.cpp"
    )
    -- Image
    add_files(
        "src/irrlicht/CColorConverter.cpp",
        "src/irrlicht/CImage.cpp",
        "src/irrlicht/CImageLoaderBMP.cpp",
        "src/irrlicht/CImageLoaderRGB.cpp",
        "src/irrlicht/CImageLoaderJPG.cpp",
        "src/irrlicht/CImageLoaderPCX.cpp",
        "src/irrlicht/CImageLoaderPNG.cpp",
        "src/irrlicht/CImageLoaderPSD.cpp",
        "src/irrlicht/CImageLoaderTGA.cpp",
        "src/irrlicht/CImageLoaderPPM.cpp",
        "src/irrlicht/CImageLoaderWAL.cpp",
        "src/irrlicht/CImageWriterBMP.cpp",
        "src/irrlicht/CImageWriterJPG.cpp",
        "src/irrlicht/CImageWriterPCX.cpp",
        "src/irrlicht/CImageWriterPNG.cpp",
        "src/irrlicht/CImageWriterPPM.cpp",
        "src/irrlicht/CImageWriterPSD.cpp",
        "src/irrlicht/CImageWriterTGA.cpp"
    )
    -- Video
    add_files(
        "src/irrlicht/CSoftwareDriver.cpp",
        "src/irrlicht/CSoftwareDriver2.cpp",
        "src/irrlicht/CSoftwareTexture.cpp",
        "src/irrlicht/CTRFlat.cpp",
        "src/irrlicht/CTRFlatWire.cpp",
        "src/irrlicht/CTRGouraud.cpp",
        "src/irrlicht/CTRGouraudWire.cpp",
        "src/irrlicht/CTRTextureFlat.cpp",
        "src/irrlicht/CTRTextureFlatWire.cpp",
        "src/irrlicht/CTRTextureGouraud.cpp",
        "src/irrlicht/CTRTextureGouraudAdd.cpp",
        "src/irrlicht/CTRTextureGouraudNoZ.cpp",
        "src/irrlicht/CTRTextureGouraudWire.cpp",
        "src/irrlicht/CZBuffer.cpp",
        "src/irrlicht/CTRTextureGouraudVertexAlpha2.cpp",
        "src/irrlicht/CTRTextureGouraudNoZ2.cpp",
        "src/irrlicht/CTRTextureLightMap2_M2.cpp",
        "src/irrlicht/CTRTextureLightMap2_M4.cpp",
        "src/irrlicht/CTRTextureLightMap2_M1.cpp",
        "src/irrlicht/CTRStencilShadow.cpp",
        "src/irrlicht/CTRNormalMap.cpp",
        "src/irrlicht/CSoftwareDriver2.cpp",
        "src/irrlicht/CSoftwareTexture2.cpp",
        "src/irrlicht/CTRTextureGouraud2.cpp",
        "src/irrlicht/CTRGouraud2.cpp",
        "src/irrlicht/CTRGouraudAlpha2.cpp",
        "src/irrlicht/CTRGouraudAlphaNoZ2.cpp",
        "src/irrlicht/CTRTextureDetailMap2.cpp",
        "src/irrlicht/CTRTextureGouraudAdd2.cpp",
        "src/irrlicht/CTRTextureGouraudAddNoZ2.cpp",
        "src/irrlicht/CTRTextureWire2.cpp",
        "src/irrlicht/CTRTextureLightMap2_Add.cpp",
        "src/irrlicht/CTRTextureLightMapGouraud2_M4.cpp",
        "src/irrlicht/IBurningShader.cpp",
        "src/irrlicht/CTRTextureBlend.cpp",
        "src/irrlicht/CTRTextureGouraudAlpha.cpp",
        "src/irrlicht/CTRTextureGouraudAlphaNoZ.cpp",
        "src/irrlicht/CDepthBuffer.cpp",
        "src/irrlicht/CBurningShader_Raster_Reference.cpp"
    )
    -- Render
    add_files(
        "src/irrlicht/CNullDriver.cpp",
        "src/irrlicht/COpenGLDriver.cpp",
        "src/irrlicht/COpenGLNormalMapRenderer.cpp",
        "src/irrlicht/COpenGLParallaxMapRenderer.cpp",
        "src/irrlicht/COpenGLShaderMaterialRenderer.cpp",
        "src/irrlicht/COpenGLTexture.cpp",
        "src/irrlicht/COpenGLSLMaterialRenderer.cpp",
        "src/irrlicht/COpenGLExtensionHandler.cpp",
        "src/irrlicht/CD3D8Driver.cpp",
        "src/irrlicht/CD3D8NormalMapRenderer.cpp",
        "src/irrlicht/CD3D8ParallaxMapRenderer.cpp",
        "src/irrlicht/CD3D8ShaderMaterialRenderer.cpp",
        "src/irrlicht/CD3D8Texture.cpp",
        "src/irrlicht/CD3D9Driver.cpp",
        "src/irrlicht/CD3D9HLSLMaterialRenderer.cpp",
        "src/irrlicht/CD3D9NormalMapRenderer.cpp",
        "src/irrlicht/CD3D9ParallaxMapRenderer.cpp",
        "src/irrlicht/CD3D9ShaderMaterialRenderer.cpp",
        "src/irrlicht/CD3D9Texture.cpp",
        "src/irrlicht/CColorConverter.cpp",
        "src/irrlicht/CImage.cpp",
        "src/irrlicht/CImageLoaderBMP.cpp",
        "src/irrlicht/CImageLoaderJPG.cpp",
        "src/irrlicht/CImageLoaderPCX.cpp",
        "src/irrlicht/CImageLoaderPNG.cpp",
        "src/irrlicht/CImageLoaderPSD.cpp",
        "src/irrlicht/CImageLoaderTGA.cpp",
        "src/irrlicht/CImageLoaderPPM.cpp",
        "src/irrlicht/CImageLoaderWAL.cpp",
        "src/irrlicht/CImageWriterBMP.cpp",
        "src/irrlicht/CImageWriterJPG.cpp",
        "src/irrlicht/CImageWriterPCX.cpp",
        "src/irrlicht/CImageWriterPNG.cpp",
        "src/irrlicht/CImageWriterPPM.cpp",
        "src/irrlicht/CImageWriterPSD.cpp",
        "src/irrlicht/CImageWriterTGA.cpp",
        "src/irrlicht/CVideoModeList.cpp",
        "src/irrlicht/CFPSCounter.cpp"
    )
    -- Animator
    add_files(
        "src/irrlicht/CSceneNodeAnimatorCameraFPS.cpp",
        "src/irrlicht/CSceneNodeAnimatorCameraMaya.cpp",
        "src/irrlicht/CSceneNodeAnimatorCollisionResponse.cpp",
        "src/irrlicht/CSceneNodeAnimatorDelete.cpp",
        "src/irrlicht/CSceneNodeAnimatorFlyCircle.cpp",
        "src/irrlicht/CSceneNodeAnimatorFlyStraight.cpp",
        "src/irrlicht/CSceneNodeAnimatorFollowSpline.cpp",
        "src/irrlicht/CSceneNodeAnimatorRotation.cpp",
        "src/irrlicht/CSceneNodeAnimatorTexture.cpp"
    )
    -- Particle
    add_files(
        "src/irrlicht/CParticleAnimatedMeshSceneNodeEmitter.cpp",
        "src/irrlicht/CParticleBoxEmitter.cpp",
        "src/irrlicht/CParticleCylinderEmitter.cpp",
        "src/irrlicht/CParticleMeshEmitter.cpp",
        "src/irrlicht/CParticlePointEmitter.cpp",
        "src/irrlicht/CParticleRingEmitter.cpp",
        "src/irrlicht/CParticleSphereEmitter.cpp",
        "src/irrlicht/CParticleAttractionAffector.cpp",
        "src/irrlicht/CParticleFadeOutAffector.cpp",
        "src/irrlicht/CParticleGravityAffector.cpp",
        "src/irrlicht/CParticleRotationAffector.cpp",
        "src/irrlicht/CParticleSystemSceneNode.cpp",
        "src/irrlicht/CParticleScaleAffector.cpp"
    )
    -- IO
    add_files(
        "src/irrlicht/CFileList.cpp",
        "src/irrlicht/CFileSystem.cpp",
        "src/irrlicht/CLimitReadFile.cpp",
        "src/irrlicht/CReadFile.cpp",
        "src/irrlicht/CWriteFile.cpp",
        "src/irrlicht/CXMLReader.cpp",
        "src/irrlicht/CXMLWriter.cpp",
        "src/irrlicht/CZipReader.cpp",
        "src/irrlicht/CPakReader.cpp",
        "src/irrlicht/CTarReader.cpp",
        "src/irrlicht/CNPKReader.cpp",
        "src/irrlicht/CWADReader.cpp",
        "src/irrlicht/CMountPointReader.cpp",
        "src/irrlicht/CMemoryFile.cpp",
        "src/irrlicht/irrXML.cpp",
        "src/irrlicht/CAttributes.cpp",
        "src/irrlicht/lzma/LzmaDec.c"
    )
    -- GUI
    add_files(
        "src/irrlicht/CGUIButton.cpp",
        "src/irrlicht/CGUICheckBox.cpp",
        "src/irrlicht/CGUIComboBox.cpp",
        "src/irrlicht/CGUIContextMenu.cpp",
        "src/irrlicht/CGUIEditBox.cpp",
        "src/irrlicht/CGUIEnvironment.cpp",
        "src/irrlicht/CGUIFileOpenDialog.cpp",
        "src/irrlicht/CGUIFont.cpp",
        "src/irrlicht/CGUIImage.cpp",
        "src/irrlicht/CGUIImageList.cpp",
        "src/irrlicht/CGUIInOutFader.cpp",
        "src/irrlicht/CGUIListBox.cpp",
        "src/irrlicht/CGUIMenu.cpp",
        "src/irrlicht/CGUIMeshViewer.cpp",
        "src/irrlicht/CGUIMessageBox.cpp",
        "src/irrlicht/CGUIModalScreen.cpp",
        "src/irrlicht/CGUIScrollBar.cpp",
        "src/irrlicht/CGUISpinBox.cpp",
        "src/irrlicht/CGUISkin.cpp",
        "src/irrlicht/CGUIStaticText.cpp",
        "src/irrlicht/CGUITabControl.cpp",
        "src/irrlicht/CGUITable.cpp",
        "src/irrlicht/CGUIToolBar.cpp",
        "src/irrlicht/CGUITreeView.cpp",
        "src/irrlicht/CGUIWindow.cpp",
        "src/irrlicht/CGUIColorSelectDialog.cpp",
        "src/irrlicht/CDefaultGUIElementFactory.cpp",
        "src/irrlicht/CGUISpriteBank.cpp"
    )
    -- Others
    add_files(
        "src/irrlicht/CIrrDeviceConsole.cpp",
        "src/irrlicht/CIrrDeviceSDL.cpp",
        "src/irrlicht/CIrrDeviceLinux.cpp",
        "src/irrlicht/CIrrDeviceStub.cpp",
        "src/irrlicht/CIrrDeviceWin32.cpp",
        "src/irrlicht/CLogger.cpp",
        "src/irrlicht/COSOperator.cpp",
        "src/irrlicht/Irrlicht.cpp",
        "src/irrlicht/os.cpp"
    )
    -- zlib
    add_files(
        "src/irrlicht/zlib/adler32.c",
        "src/irrlicht/zlib/compress.c",
        "src/irrlicht/zlib/crc32.c",
        "src/irrlicht/zlib/deflate.c",
        "src/irrlicht/zlib/inffast.c",
        "src/irrlicht/zlib/inflate.c",
        "src/irrlicht/zlib/inftrees.c",
        "src/irrlicht/zlib/trees.c",
        "src/irrlicht/zlib/uncompr.c",
        "src/irrlicht/zlib/zutil.c"
    )
    -- jpeglib
    add_files(
        "src/irrlicht/jpeglib/jaricom.c",
        "src/irrlicht/jpeglib/jcapimin.c",
        "src/irrlicht/jpeglib/jcapistd.c",
        "src/irrlicht/jpeglib/jcarith.c",
        "src/irrlicht/jpeglib/jccoefct.c",
        "src/irrlicht/jpeglib/jccolor.c",
        "src/irrlicht/jpeglib/jcdctmgr.c",
        "src/irrlicht/jpeglib/jchuff.c",
        "src/irrlicht/jpeglib/jcinit.c",
        "src/irrlicht/jpeglib/jcmainct.c",
        "src/irrlicht/jpeglib/jcmarker.c",
        "src/irrlicht/jpeglib/jcmaster.c",
        "src/irrlicht/jpeglib/jcomapi.c",
        "src/irrlicht/jpeglib/jcparam.c",
        "src/irrlicht/jpeglib/jcprepct.c",
        "src/irrlicht/jpeglib/jcsample.c",
        "src/irrlicht/jpeglib/jctrans.c",
        "src/irrlicht/jpeglib/jdapimin.c",
        "src/irrlicht/jpeglib/jdapistd.c",
        "src/irrlicht/jpeglib/jdarith.c",
        "src/irrlicht/jpeglib/jdatadst.c",
        "src/irrlicht/jpeglib/jdatasrc.c",
        "src/irrlicht/jpeglib/jdcoefct.c",
        "src/irrlicht/jpeglib/jdcolor.c",
        "src/irrlicht/jpeglib/jddctmgr.c",
        "src/irrlicht/jpeglib/jdhuff.c",
        "src/irrlicht/jpeglib/jdinput.c",
        "src/irrlicht/jpeglib/jdmainct.c",
        "src/irrlicht/jpeglib/jdmarker.c",
        "src/irrlicht/jpeglib/jdmaster.c",
        "src/irrlicht/jpeglib/jdmerge.c",
        "src/irrlicht/jpeglib/jdpostct.c",
        "src/irrlicht/jpeglib/jdsample.c",
        "src/irrlicht/jpeglib/jdtrans.c",
        "src/irrlicht/jpeglib/jerror.c",
        "src/irrlicht/jpeglib/jfdctflt.c",
        "src/irrlicht/jpeglib/jfdctfst.c",
        "src/irrlicht/jpeglib/jfdctint.c",
        "src/irrlicht/jpeglib/jidctflt.c",
        "src/irrlicht/jpeglib/jidctfst.c",
        "src/irrlicht/jpeglib/jidctint.c",
        "src/irrlicht/jpeglib/jmemmgr.c",
        "src/irrlicht/jpeglib/jmemnobs.c",
        "src/irrlicht/jpeglib/jquant1.c",
        "src/irrlicht/jpeglib/jquant2.c",
        "src/irrlicht/jpeglib/jutils.c"
    )
    -- libpng
    add_files(
        "src/irrlicht/libpng/png.c",
        "src/irrlicht/libpng/pngerror.c",
        "src/irrlicht/libpng/pngget.c",
        "src/irrlicht/libpng/pngmem.c",
        "src/irrlicht/libpng/pngpread.c",
        "src/irrlicht/libpng/pngread.c",
        "src/irrlicht/libpng/pngrio.c",
        "src/irrlicht/libpng/pngrtran.c",
        "src/irrlicht/libpng/pngrutil.c",
        "src/irrlicht/libpng/pngset.c",
        "src/irrlicht/libpng/pngtrans.c",
        "src/irrlicht/libpng/pngwio.c",
        "src/irrlicht/libpng/pngwrite.c",
        "src/irrlicht/libpng/pngwtran.c",
        "src/irrlicht/libpng/pngwutil.c"
    )
    -- bzip2
    add_files(
        "src/irrlicht/bzip2/blocksort.c",
        "src/irrlicht/bzip2/bzcompress.c",
        "src/irrlicht/bzip2/bzlib.c",
        "src/irrlicht/bzip2/crctable.c",
        "src/irrlicht/bzip2/decompress.c",
        "src/irrlicht/bzip2/huffman.c",
        "src/irrlicht/bzip2/randtable.c"
    )
    -- aesGladman
    add_files(
        "src/irrlicht/aesGladman/aescrypt.cpp",
        "src/irrlicht/aesGladman/aeskey.cpp",
        "src/irrlicht/aesGladman/aestab.cpp",
        "src/irrlicht/aesGladman/fileenc.cpp",
        "src/irrlicht/aesGladman/hmac.cpp",
        "src/irrlicht/aesGladman/prng.cpp",
        "src/irrlicht/aesGladman/pwd2key.cpp",
        "src/irrlicht/aesGladman/sha1.cpp",
        "src/irrlicht/aesGladman/sha2.cpp"
    )
    add_packages("dxsdk")
    add_links("advapi32")
    add_links("gdi32")
    add_links("user32")
